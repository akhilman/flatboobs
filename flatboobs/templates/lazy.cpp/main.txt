{% if not options["header_only"] %}
/*
 * Generated by FlatBoobs from {{ parser.root_struct_def.file|basename }}
 */

#include "{{ parser.root_struct_def.file|stem + '_flatboobs.hpp' }}"
{% endif %}

/*
 * Enum implementations
 */

{% for group in parser.enums
    | selectattr("file", "equalto", parser.root_struct_def.file)
    | groupby("defined_namespace") %}
{% for component in group.grouper.components %}
namespace {{ component }} {
{% endfor %}

{% for enum_def in group.list|sort(attribute="name") %}

{% include "lazy.cpp/enum.txt" %}
{% endfor %}

{% for component in group.grouper.components|reverse %}
}  // {{ component }}
{% endfor %}
{% endfor %}


/*
 * Struct implementations
 */

{% for group in parser.structs
    | selectattr("file", "equalto", parser.root_struct_def.file)
    | groupby("defined_namespace") %}
{% for component in group.grouper.components %}
namespace {{ component }} {
{% endfor %}

{% for table_def in group.list|sort(attribute="name") %}

{% include "lazy.cpp/table.txt" %}
{% endfor %}

{% for component in group.grouper.components|reverse %}
}  // {{ component }}
{% endfor %}
{% endfor %}

{#
// vim: syntax=cpp
#}
