/*
 * Generated by FlatBoobs from {{ parser.root_struct_def.file|basename }}
 */

#include "{{ parser.root_struct_def.file|stem + "_generated_py.h" }}"

namespace py = pybind11;
namespace fb = flatbuffers;
namespace fbb = flatboobs;

PYBIND11_MODULE({{ output_file|stem }}, m) {
  m.doc() = "Generated by FlatBoobs from "
    "{{ parser.root_struct_def.file|basename }}";

  py::module::import("flatboobs.flatboobs");


// Enums

{% for enum_def in parser.enums
    | selectattr("file", "equalto", parser.root_struct_def.file) %}
  {% include "serializer.mod/enum.txt" %}
{% endfor %}

// Structs

{#
{% for struct_def in parser.structs
    | selectattr("file", "equalto", parser.root_struct_def.file) %}
  {% include "serializer.mod/struct.txt" %}
{% endfor %}
#}

// Vectors
{#
{% for vector_type in parser.structs
    | selectattr("file", "equalto", parser.root_struct_def.file)
    | map(attribute="fields")
    | concat
    | map(attribute="value.type")
    | selectattr("definition")
    | unique(attribute="definition")
    | sort(attribute="definition.name")
    %}
  {% include "serializer.mod/vector.txt" %}
{% endfor %}
#}

}
// vim: syntax=cpp
// vim: tabstop=2
// vim: shiftwidth=2
